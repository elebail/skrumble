<% if @trip.country.photo.url.nil? %>
  <div class="trip-banner" style="background-image: linear-gradient(rgba(0,0,0,0),rgba(0,0,0,0.6)), url(<%= "https://source.unsplash.com/1420x800/?#{@trip.country.name},landmark" %>);">
<% else %>
  <div class="trip-banner" style="background-image: linear-gradient(rgba(0,0,0,0),rgba(0,0,0,0.6)), url(<%= cl_image_path @trip.country.photo, crop: :fill %>);">
<% end %>
    <div class="container">
      <h1>Hey <%= @current_user.first_name %></h1>
      <br>
      <h2> Let's Skrumble your trip to <%= Country.find(@trip.country_id).name %> !</h2>
    </div>
  </div>

<!-- HTML de base pour le bloc des trip-item-cards et todo-cards -->

<div>
  <div class="container">
    <div class="go-skrumble-bar">
      <div class="text-align-left">
        <h2>Here's your Skrumble of things</h2>
      </div>
        <button type="button" class="btn btn-outline-warning share-trip-modal" data-toggle="modal" data-target="#exampleModalLong">
          Share my trip !
        </button>
    </div>
    <div class="trip-show-flexbox">
      <div class="trip-list">
        <div>
          <h2><i class="fas fa-scroll"></i> The essentials</h2>
            <div id="sortUndone" class="trip-list-group">
              <% @trip.trip_items.each do |trip_item| %>
                <% if trip_item.done == false %>
                  <div class="item jsitem" data-id-trip="<%= trip_item.id %>">
                    <p><%= trip_item.item.name %></p>
                    <p class="quantity"><%= trip_item.quantity %></p>
                    <% if trip_item.done == false %>
                      <p class="status"><i class="far fa-thumbs-down"></i></p>
                    <% end %>
                  </div>
                <% end %>
              <% end %>
            </div>
        </div>
        <br>
        <div>
          <h2><i class="fas fa-passport"></i> The important</h2>
          <div id="sortUndone" class="todo-list-group">
            <% @trip.todos.each do |todo| %>
              <% if todo.done == false %>
                <div class="item jstodo" data-id-todo="<%= todo.id %>">
                  <p><%= todo.task.name %></p>
                  <p><%= todo.task.description %></p>
                  <p><%= todo.task.process_time %></p>
                  <% if todo.done == false %>
                    <p class="status"><i class="far fa-thumbs-down"></i></p>
                  <% end %>
                </div>
              <% end %>
            <% end %>
          </div>
        </div>
      </div>

      <div class="icon">
        <div class="drop-zone">
          <div class="suitcase">
            <i class="fas fa-suitcase"></i>
          </div>
          <div class="progression-bar">
            <div>
              <h2><i class="far fa-check-circle"></i> Good to go</h2>
              <div id="sortDone" class="done-list-group <%= "flexbox-dropzone" if @trip.todos.where(done: true).empty? && @trip.trip_items.where(done: true).empty?  %> <%= "border-drop-zone" if @trip.todos.where(done: true).empty? && @trip.trip_items.where(done: true).empty?  %>">
                <% if @trip.todos.where(done: true).empty? && @trip.trip_items.where(done: true).empty? %>
                  <div id="drag-item-text" style="vertical-align: middle">
                    <p>Drag items here</p>
                  </div>
                <% end %>
                  <% @trip.todos.each do |todo| %>
                    <% if todo.done? %>
                      <div class="item jsdone">
                        <p><%= todo.task.name %></p>
                        <!-- <p><%= todo.task.description %></p> -->
                        <!-- <p><%= todo.task.process_time %></p> -->
                        <p><i class="far fa-thumbs-up"></i></p>
                      </div>
                    <% end %>
                  <% end %>
                  <% @trip.trip_items.each do |trip_item| %>
                    <% if trip_item.done? %>
                      <div class="item jsdone">
                        <p><%= trip_item.item.name %></p>
                        <!-- <p><%= trip_item.quantity %></p> -->
                        <p><i class="far fa-thumbs-up"></i></p>
                      </div>
                    <% end %>
                  <% end %>
                </div>
              </div>
            </div>
        </div>
      </div>
    </div>
  </div>
</div>

<%= render "shared/share-trip-modal" %>
